<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to The AB</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
      text-align: center;
    }
    .chatbox {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .avatar {
      width: 500px;
      height: 500px;
      border-radius: 50%;
      background-image: url('Aby Senna.png');
      background-size: cover;
      background-position: center;
      margin: 0 auto 35px;
    }
    .chat {
      margin: 15px 0;
    }
    input, button {
      padding: 10px;
      margin: 5px;
      width: 80%;
      font-size: 16px;
    }
    .choice-btn {
      width: 90%;
      margin: 10px auto;
      display: block;
      font-weight: bold;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .choice-btn:hover {
      background-color: #0056b3;
    }
    .end-btn {
      width: 40%;
      margin: 25px auto 0 auto;
      display: block;
      font-weight: bold;
      background-color: #555;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      padding: 15px;
    }
    .end-btn:hover {
      background-color: #222;
    }
    @media (max-width: 550px) {
      .avatar {
        width: 90vw;
        height: 90vw;
        max-width: 95vw;
        max-height: 95vw;
      }
      .chatbox {
        max-width: 98vw;
        padding: 3vw;
      }
      .end-btn {
        width: 90vw;
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="chatbox">
    <div class="avatar"></div>
    <div class="chat" id="chat-area">
      <p>ðŸ‘‹ Hi there! My name is Aby Senna, your personal tour guide.</p>
      <button onclick="askName()">Continue</button>
    </div>
  </div>

  <script>
    let userName = '';
    let inviterName = '';

    // Avatar updater
    function setAvatar(imgName) {
      const avatar = document.querySelector('.avatar');
      avatar.style.backgroundImage = `url('${imgName}')`;
    }

    // Frame 1: Ask for user name (for both visitor & member)
    function askName() {
      setAvatar('Aby - Hello.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>And to whom do I have the pleasure of speaking?</p>
        <input type="text" id="nameInput" placeholder="Enter your name">
        <button onclick="submitName()">Submit</button>`;
    }

    // Name submit handler (goes to purpose menu)
    function submitName() {
      userName = document.getElementById('nameInput').value.trim();
      if (!userName) return alert("Please enter your name.");
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Well hello, <strong>${userName}</strong>! Welcome to The Ab.</p>
        <button onclick="askPurpose()">Continue</button>`;
    }

    // Main menu (visitor/member/event)
    function askPurpose() {
      setAvatar('Aby - Hello.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Tell me, ${userName}, what brings you by today?</p>
        <button class="choice-btn" onclick="visitorIntro()">I am a Visitor</button>
        <button class="choice-btn" onclick="memberIntro()">I am a Member</button>
        <button class="choice-btn" onclick="redirect('event')">I am Registering for an Event</button>`;
    }

    // VISITOR FLOW (unchanged)
    function visitorIntro() {
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>We are so happy to have you with us today, ${userName}!</p>
        <button onclick="askInvited()">Continue</button>`;
    }

    function askInvited() {
      setAvatar('Aby - Question.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Did one of our members invite you to join us today, or did you just happen to stop by?</p>
        <button class="choice-btn" onclick="askInviterName()">I was Invited</button>
        <button class="choice-btn" onclick="askFirstTime()">I came on my own</button>`;
    }

    function askInviterName() {
      setAvatar('Aby - Hello.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Terrific! Please tell me who invited you today:</p>
        <input type="text" id="inviterInput" placeholder="Enter their name">
        <button onclick="submitInviterName()">Submit</button>`;
    }

    function submitInviterName() {
      inviterName = document.getElementById('inviterInput').value.trim();
      if (!inviterName) return alert("Please enter the name of the inviter.");
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Perfect! Iâ€™ll be sure to let <strong>${inviterName}</strong> know we spoke and thank them for introducing us!</p>
        <button onclick="askFirstTime()">Continue</button>`;
    }

    function askFirstTime() {
      setAvatar('Aby - Question.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Is this your first time here?</p>
        <button class="choice-btn" onclick="firstTime(true)">Yes</button>
        <button class="choice-btn" onclick="firstTime(false)">No</button>`;
    }

    function firstTime(isFirst) {
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      let msg = isFirst ? "Weâ€™re going to do everything we can to make sure itâ€™s not your last!" : "Welcome back! Hopefully weâ€™re starting to feel more like family!";
      chat.innerHTML = `<p>${msg}</p>
        <p>Make sure to stop by the Visitorâ€™s Center and pick up your Welcome Gift!</p>
        <button onclick="askAboutJesus()">Continue</button>`;
    }

    function askAboutJesus() {
      setAvatar('Aby - Question.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>${userName}, do you know Jesus Christ?</p>
        <button class="choice-btn" onclick="knowsJesus(true)">Yes</button>
        <button class="choice-btn" onclick="knowsJesus(false)">No</button>`;
    }

    function knowsJesus(doesKnow) {
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      if (doesKnow) {
        chat.innerHTML = `<p>Thatâ€™s the BEST NEWS EVER!</p>
          <p>Again, welcome to Abyssinia, ${userName}!</p>
          <p>We hope you enjoy your visit and come back soon!</p>`;
      } else {
        chat.innerHTML = `<p>No problem, ${userName}! Iâ€™m happy to tell you all about Him.</p>
          <button onclick="showGospel()">Continue</button>`;
      }
    }

    function showGospel() {
      setAvatar('Aby - Serious.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>God is Holy, and sin cannot stand in His presence. But just as we love our own children, even when they misbehave and disobey us, God still loves us and desires for us to come back to Him. But the penalty for sin is death and someone must pay. So out of love for us, God sent His only son, Jesus down into the world to pay that price and take on our punishment. Now that the sin debt has been paid, we have a clear path back to the open arms of God, through the crucifixion and burial sacrifice of Jesus Christ. But because Jesus is the Son of God, death couldnâ€™t possibly keep Him. He rose from the grave and ascended back to Heaven, where He sits today.</p>
        <button onclick="askSalvation()">Continue</button>`;
    }

    function askSalvation() {
      setAvatar('Aby - Question.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Have you accepted Him as your Lord and Savior?</p>
        <button class="choice-btn" onclick="acceptedJesus(true)">Yes</button>
        <button class="choice-btn" onclick="acceptedJesus(false)">No</button>`;
    }

    function acceptedJesus(hasAccepted) {
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      if (hasAccepted) {
        chat.innerHTML = `<p>Thatâ€™s the BEST NEWS EVER!</p>
          <p>Again, welcome to Abyssinia, ${userName}!</p>
          <p>We hope you enjoy your visit and come back soon!</p>`;
      } else {
        chat.innerHTML = `<p>Are you ready to accept Him as Savior today?</p>
          <button class="choice-btn" onclick="readyToAccept(true)">Yes</button>
          <button class="choice-btn" onclick="readyToAccept(false)">No</button>`;
      }
    }

    function readyToAccept(isReady) {
      setAvatar('Aby - Serious.png');
      const chat = document.getElementById('chat-area');
      if (isReady) {
        chat.innerHTML = `<p>Itâ€™s as easy as ABC: Acknowledge our sinfulness, Believe that Jesus is the Son of God, and Confess Him as Lord and Savior.</p>
          <p>Pray this prayer right now:</p>
          <p><em>"Lord Jesus, I know I am a sinner. I believe you died on the cross for my sins and rose again. I turn from my sins and ask you to come into my heart and be my Lord and Savior. Thank you for your forgiveness and new life. Amen."</em></p>
          <p>Welcome to the family, ${userName}!</p>`;
      } else {
        chat.innerHTML = `<p>I respect your decision and wonâ€™t push, but know that the entire Abyssinia family will continue to pray with and for your salvation!</p>
          <p>Again, welcome to The Ab, ${userName}!</p>`;
      }
    }

    // ============ MEMBER FLOW ============

    // Member Flow Frame 2: Thank by name (enters directly after purpose select)
    function memberIntro() {
      setAvatar('Aby - Excited.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `<p>Thank you, <strong>${userName}</strong>, for being a vital part of The Abyssinia Church Family.</p>
        <button onclick="memberReason()">Continue</button>`;
    }

    // Member Flow Frame 3: Ask purpose w/ avatar
    function memberReason() {
      setAvatar('Aby - Question.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `
        <p>So, <strong>${userName}</strong>, how can I help you today?</p>
        <button class="choice-btn" onclick="memberHelp('ride')">I need to schedule a ride</button>
        <button class="choice-btn" onclick="window.open('https://abyssinia.org/theab/join-a-ministry/', '_blank')">How can I join a Ministry?</button>
        <button class="choice-btn" onclick="window.open('https://abyssinia.org/theab/prayer-request/', '_blank')">I'm in need of Prayer</button>
        <button class="choice-btn" onclick="window.open('https://abyssinia.org/theab/counseling-request/', '_blank')">I'm in need of Counseling</button>
        <button class="choice-btn" onclick="window.open('https://abyssinia.org/theab/online-giving/', '_blank')">I want to give online</button>
      `;
    }

    // Member Branching and looping
    function memberHelp(option) {
      let response = '';
      setAvatar('Aby - Serious.png');
      if (option === 'ride') {
        response = `If you need transportation to any of our regularly scheduled services, please call the church at: <a href="tel:9046961770">(904) 696-1770</a> and leave a message for the transportation ministry. Weâ€™ll be happy to pick you up and take you home safely!`;
        showAnythingElse(response);
      }
      // All other options are now handled by direct redirect in memberReason()
    }

    // "Is there anything else?" frame and logic
    function showAnythingElse(prevResponse) {
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `
        <p>${prevResponse}</p>
        <p>Is there anything else I can help you with?</p>
        <button class="choice-btn" onclick="memberReason()">Yes</button>
        <button class="choice-btn" onclick="goodbyeMember()">No</button>
      `;
    }

    // Goodbye frame with "End" button to website
    function goodbyeMember() {
      setAvatar('Aby - Goodbye.png');
      const chat = document.getElementById('chat-area');
      chat.innerHTML = `
        <p>Come see me again soon! Have a great day!</p>
        <button class="end-btn" onclick="window.location.href='https://abyssinia.org/theab/'">End</button>
      `;
    }

    // EVENT redirect (from main menu)
    function redirect(choice) {
      const urls = {
        event: 'https://www.eventbrite.com/e/the-big-catch-baptism-family-friends-and-community-day-tickets-1422315657419?aff=ebdssbdestsearch'
      };
      window.location.href = urls[choice];
    }
  </script>
</body>
</html>
