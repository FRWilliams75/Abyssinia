<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome Visitor - The AB</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; text-align: center; }
    .chatbox { max-width: 600px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .avatar { width: 120px; height: 120px; border-radius: 50%; background-image: url('Aby Senna.png'); background-size: cover; background-position: center; margin: 0 auto 10px; }
    .chat { margin: 15px 0; }
    input, select, button { padding: 10px; margin: 5px; width: 80%; font-size: 16px; }
    .choice-btn { width: 90%; margin: 10px auto; display: block; font-weight: bold; background-color: #007BFF; color: white; border: none; border-radius: 8px; cursor: pointer; }
    .choice-btn:hover { background-color: #0056b3; }
  </style>
</head>
<body>
  <div class="chatbox">
    <div class="avatar"></div>
    <div class="chat" id="chat-area">
      <p>ðŸ‘‹ Hi there! My name is Aby Senna, your personal tour guide.</p>
      <button onclick="nextStep()">Continue</button>
    </div>
  </div>

  <script>
    let formData = {
      firstName: '',
      lastName: '',
      visitDate: '',
      serviceType: '',
      eventName: '',
      city: '',
      state: '',
      zip: '',
      gender: '',
      homePhone: '',
      cellPhone: '',
      email: '',
      hasChurchHome: '',
      churchName: ''
    };
    let step = 0;

    function nextStep() {
      const chat = document.getElementById('chat-area');
      const steps = [
        () => chat.innerHTML = `<p>Letâ€™s get to know you a little better.</p><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>What day are you visiting us?</p><input type='date' onchange='formData.visitDate = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>Which service are you attending?</p>
          <button class='choice-btn' onclick='selectService("Sunday Morning")'>Sunday Morning</button>
          <button class='choice-btn' onclick='selectService("Wednesday Bible Study")'>Wednesday Bible Study</button>
          <button class='choice-btn' onclick='selectService("Special Event")'>Special Event</button>`,
        () => chat.innerHTML = `<p>What is the name of the special event?</p><input type='text' onchange='formData.eventName = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>What is your first name?</p><input type='text' onchange='formData.firstName = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>What is your last name?</p><input type='text' onchange='formData.lastName = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>City you live in?</p><input type='text' onchange='formData.city = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>State?</p><input type='text' onchange='formData.state = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>Zip Code?</p><input type='text' onchange='formData.zip = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>What is your gender?</p>
          <button class='choice-btn' onclick='formData.gender="Male"; nextStep()'>Male</button>
          <button class='choice-btn' onclick='formData.gender="Female"; nextStep()'>Female</button>`,
        () => chat.innerHTML = `<p>What is your home phone number?</p><input type='text' onchange='formData.homePhone = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>What is your cell phone number?</p><input type='text' onchange='formData.cellPhone = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>What is your email address?</p><input type='email' onchange='formData.email = this.value'><br><button onclick='nextStep()'>Continue</button>`,
        () => chat.innerHTML = `<p>Do you have a church home?</p>
          <button class='choice-btn' onclick='formData.hasChurchHome="Yes"; askChurchName()'>Yes</button>
          <button class='choice-btn' onclick='formData.hasChurchHome="No"; noChurchHome()'>No</button>`
      ];

      if (step < steps.length) {
        steps[step]();
        step++;
      } else {
        submitForm();
      }
    }

    function selectService(service) {
      formData.serviceType = service;
      if (service === "Special Event") step = 3; // insert special event step
      else step = 4; // skip to name input
      nextStep();
    }

    function askChurchName() {
      document.getElementById('chat-area').innerHTML = `<p>What is the name of your church?</p><input type='text' onchange='formData.churchName = this.value'><br><button onclick='submitForm()'>Submit</button>`;
    }

    function noChurchHome() {
      document.getElementById('chat-area').innerHTML = `<p>We would love nothing more than to be your church home, and Dr. Eugene Diamond would be honored to be your pastor.</p>
        <button onclick='submitForm()'>Submit My Info</button>`;
    }

    function submitForm() {
      const emailBody = `Visitor Registration Form\n\n
Date of Visit: ${formData.visitDate}\n
Service: ${formData.serviceType}${formData.eventName ? ' - ' + formData.eventName : ''}\n

Name: ${formData.firstName} ${formData.lastName}\n
Address: ${formData.city}, ${formData.state} ${formData.zip}\n
Gender: ${formData.gender}\n
Home Phone: ${formData.homePhone}\n
Cell Phone: ${formData.cellPhone}\n
Email: ${formData.email}\n
Church Home: ${formData.hasChurchHome}\n
${formData.hasChurchHome === 'Yes' ? 'Church Name: ' + formData.churchName : ''}`;

      const mailtoLink = `mailto:Dr.FRWilliams@gmail.com?subject=Aby Has Sent a Visitor Registration Form&body=${encodeURIComponent(emailBody)}`;
      window.location.href = mailtoLink;

      document.getElementById('chat-area').innerHTML = `<p>Thank you for sharing your information! We're excited you visited with us today. ðŸ’™</p>`;
    }
  </script>
</body>
</html>
